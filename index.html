<!DOCTYPE html>
<html>
<body>
<h1>Hello World</h1>
<p>I'm hosted with GitHub Pages.</p>
 <script>
    const button = document.createElement('button');
    button.innerHTML = 'Нажми';
    async function test_async() {
        var targetUrl = "some_text"
        try {
            const result = await navigator.permissions.query({ name: "clipboard-write" });
            console.log(result.state)
            if (result.state === "granted" || result.state === "prompt") {

                if (!navigator.clipboard) {
                    console.log("missing navigator.clipboard");
                    return;
                }

                await navigator.clipboard.writeText(targetUrl);
            }
        } catch (error) {
            console.error(`error : ${error}`)
            // earlier iOS hack with the deprecated execCommand method
            const clipBoardElem = document.createElement("input");
            document.body.appendChild(clipBoardElem);
            clipBoardElem.value = targetUrl;
            clipBoardElem.select();
            try{
                return document.execCommand('copy');
            }catch(error1){
                console.error(`error1 : ${error1}`)
            }
        }
    }
    button.onclick = test_async;
    document.appendChild(button);
        // navigator.clipboard.writeText("some_text").then(() => {
        //             console.error('url has been copied successfully: ', err);
        //         }).catch(err => {
        //             console.error('url copy error: ', err);
        //         });
 </script>
</body>
</html>